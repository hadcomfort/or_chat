# OpenRouter Minimal Chat macOS App

A minimal, secure macOS chat application that uses your OpenRouter API key for LLM communication. Designed for privacy and simplicity.

## Features

- Simple ChatGPT-style interface: single window, message history, input field, send button.
- Direct connection to OpenRouter API endpoints.
- Secure API key storage in macOS Keychain.
- Local-only conversation storage.
- Graceful error handling for network/API issues.
- Minimalist design with no menus, settings, or multi-conversation features.

## Security & Privacy

This application has been built with security and privacy as primary considerations:

- **API Key Security**: Your OpenRouter API key is stored securely in the macOS Keychain. It is *never* stored in plaintext files or logs. The key is only accessed when needed for API calls and is transmitted exclusively over HTTPS.
- **HTTPS Communication**: All network traffic to the OpenRouter API uses HTTPS, ensuring that your conversations and API key are encrypted in transit.
- **Local Data Storage**: Conversation history is stored locally on your Mac in the application's sandboxed container (`~/Library/Application Support/com.example.OpenRouterChat/chatHistory.json`). This data is not encrypted by the application itself but relies on standard macOS file permissions and sandboxing. It is not sent to any third parties. (Note: `com.example.OpenRouterChat` is the default placeholder; the actual bundle ID can be found in `Services/KeychainService.swift` under the `service` constant or derived from your project settings in Xcode).
- **No Telemetry or Tracking**: The application includes no telemetry, user tracking, analytics, or crash reporting. Your activity and data remain entirely private and local to your machine (and your interactions with OpenRouter).
- **Native Frameworks**: Built using Apple-native frameworks (SwiftUI, Foundation, Security) to minimize external dependencies and potential vulnerabilities.
- **Code Transparency**: Inline comments throughout the codebase highlight security choices and data handling practices.

## Technical Details

- **Platform**: macOS (latest version recommended)
- **Language**: Swift (latest version)
- **UI Framework**: SwiftUI
- **API Interaction**: Uses `URLSession` for direct calls to the OpenRouter API (`https://openrouter.ai/api/v1/chat/completions`).
- **Default Model**: The application currently defaults to `gryphe/mythomax-l2-13b`. This can be changed directly in the `Services/OpenRouterService.swift` file (`defaultModel` constant) if you wish to use a different model.

## Build and Run Instructions

1.  **Clone the Repository**:
    ```bash
    git clone https://github.com/your-username/or_chat.git
    cd or_chat
    ```
    (Replace `https://github.com/your-username/or_chat.git` with the actual repository URL)

2.  **Open in Xcode**:
    Since this project is structured with an `OpenRouterChatApp.swift` file, it's intended to be an Xcode project.
    - If an `.xcodeproj` file is present in the repository, open that with Xcode.
    - If you only have the Swift files (as is the case with this current setup):
        1. Open Xcode.
        2. Choose "Create a new Xcode project".
        3. Select the "macOS" tab, then "App", and click "Next".
        4. Name your product (e.g., "OpenRouterChat"), choose "SwiftUI" for the Interface and "Swift" for the Language. Click "Next".
        5. Choose a location to save your project and click "Create".
        6. Delete the default `ContentView.swift` and `YourProjectNameApp.swift` (e.g., `OpenRouterChatApp.swift`) files generated by Xcode.
        7. Drag all the `.swift` files from the cloned repository (`OpenRouterChatApp.swift`, and all files from the `Models/`, `Views/`, `ViewModels/`, `Services/` folders) into your Xcode project navigator. Ensure "Copy items if needed" is checked and that they are added to your app's target.
        8. Drag the `Assets.xcassets` directory from the cloned repository into your Xcode project navigator, ensuring it's added to the target.

3.  **Select Target and Device**:
    Choose the "OpenRouterChat" target (or the name you gave your project) and "My Mac" as the run destination.

4.  **Build and Run**:
    Click the "Play" button (or `Cmd+R`) in Xcode to build and run the application.

## API Key Setup

The first time you launch the application, or if an API key is not found in your Keychain, you will be prompted to enter your OpenRouter API key:

1.  A sheet will appear asking for your "OpenRouter API Key".
2.  Paste your key (it usually starts with `sk-or-...`) into the text field.
3.  Click "Save Key".

Your API key will be securely stored in your macOS Keychain. The application will use this key for all subsequent API requests.

**Managing Your API Key**:
- The application provides no UI to change or delete the key after it's set, primarily for simplicity.
- To **change or delete** the API key, you can:
    1.  Open "Keychain Access.app" on your Mac.
    2.  In the search bar, type the service name used by the app. This is defined in `Services/KeychainService.swift` (the `service` constant, which defaults to `Bundle.main.bundleIdentifier ?? "com.example.OpenRouterChat"`). If you built the project from scratch in Xcode and didn't set a custom bundle ID, it would be the one Xcode assigned (e.g., `com.yourcompany.OpenRouterChat`), or `com.example.OpenRouterChat` if that was used as the placeholder product name.
    3.  Find the entry for the account name `openRouterAPIKey` (also defined in `KeychainService.swift`).
    4.  You can delete this entry. The next time you run the app, you'll be prompted for a new key.
    *Alternatively, the `clearAPIKey()` method in `ChatViewModel.swift` and the `deleteAPIKey()` method in `KeychainService.swift` can be programmatically called if a UI option were added.*

## Local Storage of Conversations

-   Chat history is saved to `~/Library/Application Support/<YourAppBundleID>/chatHistory.json`. Replace `<YourAppBundleID>` with your application's bundle identifier (e.g., `com.example.OpenRouterChat` if not customized; check how it's constructed in `Services/StorageService.swift` via `Bundle.main.bundleIdentifier`).
-   You can manually delete this file if you wish to clear all conversation history. The app also includes a `clearChatHistory()` method in the `ChatViewModel` that could be triggered by a UI element in future versions (though no such UI element currently exists).

## Dependencies

-   This application uses only Apple-native frameworks:
    -   SwiftUI
    -   Foundation
    -   Security
    -   Combine
-   There are no third-party library dependencies.

## Customization

-   **Default LLM Model**: To change the default Large Language Model used for chats, you can modify the `defaultModel` constant in the `Services/OpenRouterService.swift` file. Rebuild the application after making this change.

## Contributing

Contributions are welcome! Please feel free to fork the repository, make changes, and open a pull request.

## License

This project is released under the MIT License. (Consider adding an actual `LICENSE` file with MIT license text if desired).